grammar Bilbo;


header
    : Visibility? 'static' type nimi '(' type nimi ')' '{' body '}'
    ;

body
    :    (line ';')*
    ;

line
    :   head '~>' java
    ;

java
    : '{' (java | SimpleJava)*? '}'
    | Simplejava
    ;

head
    :   type '(' args? ')'
    |   Bottom
    ;

args
    :   arg (',' arg)*
    ;

arg
    :   var
    |   match
    ;

var
    :   Name
    ;

match
    :   Number
    |   String
    ;

nimi
    :   Name
    ;

type
    :   TypeName
    ;

Visibility
    : ('public' | 'private' | 'protected')
    ;

SimpleJava
    : [a-z]
    ;

TypeName
    :   [A-Z][a-z0-9_]*
    ;

Bottom
    :  '_'
    ;

Name
    :   [a-z][a-z0-9_]*
    ;

Number
    :   [-+]?[0-9]*'.'?[0-9]+
    ;

String
    :   '"' [a-zA-Z0-9+-/*!"#%&/()=]* '"'
    ;

Simplejava
    :   [a-b]
    ;

Whitespace
    :   [ \t\r\n]+ -> skip
    ;


